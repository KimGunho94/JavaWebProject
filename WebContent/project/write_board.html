<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script type="text/javascript" src="/libs/smarteditor/js/service/HuskyEZCreator.js" charset="utf-8"></script>
	<script src="../js/jquery-3.7.0.min.js"></script>
	<link rel="stylesheet" href="../CSS/header_footer.css">
	<link rel="stylesheet" href="../CSS/write_board.css">
	<style>
		body{
		margin:0;
		}
	</style>
</head>
<body>
 <header>
    <div class="head_box">
      <div class="head_content">
        <div class="head_title">
          <h1><a href="./Main.html"><img src="../Images/stu_logo.png" alt=""></a></h1>
        </div>
<!--                  <% -->
<!--      			if (session.getAttribute("userEmail") == null) { -->
<!--      		%> -->
<!--         <div class="gnb_box"> -->
<!--           <div class="gnb_content"> -->
<!--             <ul> -->
<!--               <li><a href="">고객센터</a></li> -->
<!--               <li><a href="Login.jsp">로그인</a></li> -->
<!--               <li><a href="Signup.jsp">회원가입</a></li> -->
<!--             </ul> -->
<!--           </div> -->
<!--         </div> -->
<!--        <% -->
<!--            } else { -->
<!--          %> -->
        <div class="gnb_box">
          <div class="gnb_content">
            <ul>
              <li><a href="">고객센터</a></li>
              <li class="profil"><img src="../Images/img_pfnull.jpg"></li>
            </ul>
          </div>
	        <div class="profil_box">
	        	<ul>
	        		<li>
	        			<img src="../Images/img_pfnull.jpg">
	        			<p>
<!--  	        			<%=session.getAttribute("userNickname")%> -->
							알파카
	        			님 <br><span class="hi">안녕하세요.</span></p>
	        		</li>
	        		<li><a href="Mypage.jsp">마이페이지</a></li>
	        		<li><a href="LogoutAction.jsp?page=1">로그아웃</a></li>
	        	</ul>
	        </div>
        </div>
<!--          <%  -->
<!--           } -->
<!--          %> -->
      </div>
    </div>
    <div class="lnb_box">
      <div class="lnb_content">
        <ul>
          <li><a href="./Main.html">홈</a></li>
          <li><a href="./SearchMain.html">탐색</a></li>
          <li><a href="">유럽투어</a></li>
          <li><a href="./HotelMain.html">숙소</a></li>
          <li><a href="#">여행기</a></li>
        </ul>        
      </div>
    </div>
  </header>
<div id="write_body">
	<div id="write_title_box">
		<h2>제목 *</h2>
		<input id="user_title" type="text" placeholder="제목을 입력해 주세요">
		<div class="title_check hide"> 제목은 필수입니다.</div>
	</div>
	<div id="write_ctt_box">
		<h2>내용 *</h2>
		<textarea id="write_ctt" rows="30" placeholder="내용을 입력해 주세요"></textarea>
		<input type="file" id="image" accept="image/*" onchange="setThumbnail(event);">
		 <div id="image_container"></div>
		
	</div>
	<div id="list_btn">
		<button id="cancel_btn">취소</button>
		<button id="save_btn">저장</button>
	</div>
</div>	
</body>
  <footer>
    <div class="util_Box">
      <div class="util_contain">
        <div class="util_content">
          <ul>
            <li><a href="#">광고/제휴문의</a></li>
            <li><a href="#">서비스문의</a></li>
            <li><a href="#">개인정보 취급방침</a></li>
            <li><a href="#">이용약관</a></li>
            <li><a href="#">여행자약관</a></li>
            <li><a href="#">가이드약관</a></li>
          </ul>
        </div>
        <div class="util_sns">
          <ul>
            <li class="stu_sns facebook"><a href="#"></a></li>
            <li class="stu_sns instagram"><a href="#"></a></li>
            <li class="stu_sns kakao"><a href="#"></a></li>
            <li class="stu_sns email"><a href="#"></a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="coInfo_Box">
      <div class="coInfo_contain">
        <div class="footer_logo"></div>
        <div class="business_info">
          <p>상상속 여행을 현실로, 스투비플래너</p>
          <address> contact: apple9568@naver.com</address>
        </div>
      </div>
    </div>
  </footer>
<script>
	function setThumbnail(event) {
    	var reader = new FileReader();

    	reader.onload = function(event) {
      	var img = document.createElement("img");
      	img.setAttribute("src", event.target.result);
      	document.querySelector("div#image_container").appendChild(img);
    };

    reader.readAsDataURL(event.target.files[0]);
  }
	let usertitle = document.querySelector("#user_title");
	let userctt = document.querySelector("#write_ctt");
	let failureMessage = document.querySelector(".title_check");
	usertitle.addEventListener('keyup',()=>{
		if(usertitle.value.length===0){
			failureMessage.classList.remove('hide');
		}
		else if(checklength(usertitle.value)){
			failureMessage.classList.add('hide');
		}
	});
	userctt.addEventListener('click',()=>{
		if(usertitle.value.length===0){
			failureMessage.classList.remove('hide');
		}
	});
	function checklength(value){
		return value.length>=1;
	}
	$(function(){
		$("#cancel_btn").click(function(){
			let answer=confirm("저장하지 않은 내용은 잃게 됩니다.\n커뮤니티 글쓰기 페이지에서 나가시겠습니까?")
			if(answer)
				location.href="Diary.jsp";
		})
	})
	$(function(){
		$("#save_btn").click(function(){
			if(usertitle.value.length===0){
				alert("제목이 없습니다.");
			}
			else if(userctt.value.length===0){
				alert("내용이 없습니다.");
			} else{
				let answer = confirm("여행기를 저장하시겠습니까?");
				if(answer){
					alert("저장되었습니다.");
					location.href = "Diary.jsp";
				}
			}
		})
	})
</script>
</html>